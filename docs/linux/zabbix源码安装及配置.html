
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>zabbix源码安装及配置 · 黎明的奔跑</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Lewis">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="MySQL配置主从读写分离.html" />
    
    
    <link rel="prev" href="Nagios监控.html" />
    

    
        <link rel="shortcut icon" href='../images/favicon.ico' type="image/x-icon">
    
    
        <link rel="bookmark" href='../images/favicon.ico' type="image/x-icon">
    
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://www.shareknowledge.top" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="redis.html">
            
                <a href="redis.html">
            
                    
                        <b>1.2.</b>
                    
                    搭建redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Tomcat环境搭建.html">
            
                <a href="Tomcat环境搭建.html">
            
                    
                        <b>1.3.</b>
                    
                    Tomcat环境搭建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="KVM虚拟化.html">
            
                <a href="KVM虚拟化.html">
            
                    
                        <b>1.4.</b>
                    
                    KVM虚拟化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Git使用.html">
            
                <a href="Git使用.html">
            
                    
                        <b>1.5.</b>
                    
                    Git使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Nagios监控.html">
            
                <a href="Nagios监控.html">
            
                    
                        <b>1.6.</b>
                    
                    Nagios监控
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7" data-path="zabbix源码安装及配置.html">
            
                <a href="zabbix源码安装及配置.html">
            
                    
                        <b>1.7.</b>
                    
                    zabbix源码安装及配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="MySQL配置主从读写分离.html">
            
                <a href="MySQL配置主从读写分离.html">
            
                    
                        <b>1.8.</b>
                    
                    MySQL配置主从读写分离
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="MySQL高可用之MHA.html">
            
                <a href="MySQL高可用之MHA.html">
            
                    
                        <b>1.9.</b>
                    
                    MySQL高可用之MHA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="GitLab与Jenkins结合构建持续集成环境.html">
            
                <a href="GitLab与Jenkins结合构建持续集成环境.html">
            
                    
                        <b>1.10.</b>
                    
                    GitLab与Jenkins结合构建持续集成(CI)环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../python/example1.html">
            
                <a href="../python/example1.html">
            
                    
                        <b>1.11.</b>
                    
                    第一节
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >zabbix源码安装及配置</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><a href="#zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;">1. zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;</a></li><ul><li><a href="#&#x4E8C;&#xFF0E;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;">1.1. &#x4E8C;&#xFF0E;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;</a></li><ul><li><a href="#21&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;">1.1.1. 2.1&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;</a></li><li><a href="#22&#x670D;&#x52A1;&#x7AEF;&#x6DFB;&#x52A0;-host-&#x4E3B;&#x673A;">1.1.2. 2.2&#x670D;&#x52A1;&#x7AEF;&#x6DFB;&#x52A0; Host &#x4E3B;&#x673A;</a></li><li><a href="#23&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x9879;">1.1.3. 2.3&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x9879;</a></li><li><a href="#24&#x8BBE;&#x7F6E;-triger-&#x89E6;&#x53D1;&#x5668;&#x503C;">1.1.4. 2.4&#x8BBE;&#x7F6E; Triger &#x89E6;&#x53D1;&#x5668;&#x503C;</a></li><li><a href="#25&#x66F4;&#x65B0;&#x6570;&#x636E;">1.1.5. 2.5&#x66F4;&#x65B0;&#x6570;&#x636E;</a></li></ul><li><a href="#&#x4E09;&#xFF0E;zabbix&#x76D1;&#x63A7;apache&#x670D;&#x52A1;">1.2. &#x4E09;&#xFF0E;zabbix&#x76D1;&#x63A7;Apache&#x670D;&#x52A1;</a></li><ul><li><a href="#31&#x542F;&#x7528;apache-&#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x542F;apache&#x7684;server-status">1.2.1. 3.1&#x542F;&#x7528;apache &#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x542F;apache&#x7684;server-status</a></li><li><a href="#32&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x76F8;&#x5E94;&#x76EE;&#x5F55;">1.2.2. 3.2&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x76F8;&#x5E94;&#x76EE;&#x5F55;</a></li><li><a href="#33&#x4FEE;&#x6539;zabbix--agentdconf">1.2.3. 3.3&#x4FEE;&#x6539;zabbix -agentd.conf</a></li><li><a href="#34&#x524D;&#x7AEF;&#x9875;&#x9762;&#x64CD;&#x4F5C;">1.2.4. 3.4&#x524D;&#x7AEF;&#x9875;&#x9762;&#x64CD;&#x4F5C;</a></li></ul><li><a href="#&#x56DB;&#xFF0E;&#x914D;&#x7F6E;-zabbix-&#x76D1;&#x63A7;-mysql">1.3. &#x56DB;&#xFF0E;&#x914D;&#x7F6E; zabbix &#x76D1;&#x63A7; MySQL</a></li><li><a href="#&#x4E94;&#xFF0E;zabbix&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x914D;&#x7F6E;">1.4. &#x4E94;&#xFF0E;Zabbix&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x914D;&#x7F6E;</a></li></ul></ul></div><a href="#zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;"><a name="zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;" class="anchor-navigation-ex-anchor" href="#zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;"><i class="fa fa-link" aria-hidden="true"></i></a>1. zabbix&#x6E90;&#x7801;&#x642D;&#x5EFA;</h1>
<p>&#x73AF;&#x5883;&#xFF1A;LNMP+zabbix3.4</p>
<p>&#x6574;&#x4E2A;&#x73AF;&#x5883;&#x6240;&#x9700;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x5305;</p>
<p>php-5.6.13</p>
<p>libmcrypt-2.5.8</p>
<p>mysql-5.6.26</p>
<p>nginx-1.8.0</p>
<p>zabbix-3.4.3</p>
<ol>
<li><strong>&#x521B;&#x5EFA;&#x5BFC;&#x5165;zabbix&#x6570;&#x636E;&#x5E93;</strong></li>
</ol>
<p>[root\@lewis63 ~]# mysql -uroot -p</p>
<p>mysql&gt; create database zabbix;</p>
<p>mysql&gt; create database zabbix;</p>
<p>mysql&gt; flush privileges;</p>
<p>[root\@lewis63 ~]# tar zxf zabbix-3.4.3.tar.gz -C /usr/local/src/</p>
<p>[root\@lewis63 ~]# cd /usr/local/src/zabbix-3.4.3/</p>
<p><strong>&#x5BFC;&#x5165;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6CE8;&#x610F;&#x987A;&#x5E8F;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x62A5;&#x9519;</strong></p>
<p>[root\@lewis63 zabbix-3.4.3]# mysql -uzabbix -pzabbix zabbix \&lt;
database/mysql/schema.sql</p>
<p>[root\@lewis63 zabbix-3.4.3]# mysql -uzabbix -pzabbix zabbix \&lt;
database/mysql/images.sql</p>
<p>[root\@lewis63 zabbix-3.4.3]# mysql -uzabbix -pzabbix zabbix \&lt;
database/mysql/data.sql</p>
<ol>
<li><strong>&#x7F16;&#x8BD1;zabbix</strong></li>
</ol>
<p>[root\@lewis63 ~]# groupadd zabbix</p>
<p>[root\@lewis63 ~]# useradd -s /sbin/nologin -g zabbix zabbix #&#x521B;&#x5EFA;&#x7528;&#x6237;</p>
<p>&#x89E3;&#x51B3;&#x4F9D;&#x8D56;</p>
<p>yum install -y net-snmp-devel</p>
<p>yum install -y libevent libevent-devel</p>
<p>[root\@lewis63 zabbix-3.4.3]# ./configure --prefix=/usr/local/zabbix
--enable-server --enable-agent --with-mysql=/var/lib/mysql/bin/mysql_config
--with-net-snmp --with-libcurl&#x53C2;&#x6570;&#x8BF4;&#x660E;:</p>
<p>--prefix= #&#x6307;&#x5B9A;&#x8DEF;&#x5F84;</p>
<p>--enable-server #Server &#x652F;&#x6301;</p>
<p>--enable-agent #&#x652F;&#x6301; Zabbix &#x5BA2;&#x6237;&#x7AEF;</p>
<p>--with-mysql #&#x6307;&#x5B9A; MySql &#x5E93;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x81EA;&#x5B9A;&#x8DEF;&#x5F84; mysql_config&#xFF0C;mysql_config
&#x662F;&#x547D;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x7F16;&#x8BD1; mysql &#x5BA2;&#x6237;&#x7AEF;&#x7A0B;&#x5E8F;</p>
<p>--with-net-snmp #&#x652F;&#x6301; snmp &#x534F;&#x8BAE;&#xFF0C;&#x9700;&#x8981;&#x5B89;&#x88C5; net-snmp-devel &#x5305;</p>
<p>--with-libcurl #&#x652F;&#x6301; CURL &#x529F;&#x80FD;&#xFF0C;libcurl
&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x534F;&#x8BAE;&#x8FDE;&#x63A5;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;</p>
<p>libcurl &#x5F53;&#x524D;&#x652F;&#x6301;&#x7684;&#x534F;&#x8BAE;&#x6709; http&#xFF0C;https&#xFF0C;ftp&#xFF0C;gopher&#xFF0C;telent&#xFF0C;dict&#xFF0C;file&#xFF0C;&#x548C; ldap
&#x534F;&#x8BAE;</p>
<p>&#x5176;&#x4ED6;&#x53C2;&#x6570;&#xFF1A;</p>
<p>--enable-proxy &#x6307;&#x7684;&#x662F;&#x652F;&#x6301; zabbix &#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;zabbix proxy
&#x662F;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5B83;&#x6536;&#x96C6;&#x5230;&#x76D1;&#x63A7;&#x6570;&#x636E;&#xFF0C;&#x9009;&#x5B58;&#x653E;&#x5728;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x4FDD;&#x5B58;&#x7684;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BBE;&#x5B9A;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x4F20;&#x9001;&#x7684;
zabbix server&#x3002;&#x76D1;&#x63A7;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p>&#x7528; zabbix proxy
&#x7684;&#x597D;&#x5904;&#xFF1A;&#x8FDB;&#x7A0B;&#x76D1;&#x63A7;&#xFF0C;&#x5F53;&#x76D1;&#x63A7;&#x7684;&#x4F4D;&#x7F6E;&#x901A;&#x4FE1;&#x4E0D;&#x4FBF;&#x65F6;&#xFF0C;&#x5F53;&#x901A;&#x8BAF;&#x4E0A;&#x5343;&#x53F0;&#x8BBE;&#x5907;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;
zabbix_proxy &#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x7EF4;&#x62A4;&#x5206;&#x5E03;&#x5F0F;&#x76D1;&#x63A7;&#xFF0C;&#x964D;&#x4F4E; zabbix server &#x7684;&#x8D1F;&#x8D1F;&#x8F7D;</p>
<p>***********************************************************</p>
<p>* Now run &apos;make install&apos; *</p>
<p>* *</p>
<p>* Thank you for using Zabbix! *</p>
<p>* \<a href="http://www.zabbix.com\" target="_blank">http://www.zabbix.com\</a> *</p>
<p>#&#x6309;&#x4E0A;&#x9762;&#x7684;&#x63D0;&#x793A;&#xFF0C;&#x6CA1;&#x6709; make &#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x63A5; make install</p>
<p>[root\@lewis63 zabbix-3.4.3]# make install</p>
<p><strong>3.&#x914D;&#x7F6E; zabbix Server</strong></p>
<p>[root\@lewis63 ~]# vim /usr/local/zabbix/etc/zabbix_server.conf</p>
<p>DBHost=localhost #&#x9ED8;&#x8BA4;&#x6CE8;&#x91CA;&#x6389;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x53D6;&#x6D88;&#x6CE8;&#x91CA;&#x5373;&#x53EF;</p>
<p>DBName=zabbix #&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#xFF0C;&#x6211;&#x4EEC;&#x6388;&#x6743;&#x7684;&#x7528;&#x6237;&#x4E5F;&#x662F;zabbix</p>
<p>DBUser=zabbix #&#x9ED8;&#x8BA4;&#x662F; root&#xFF0C;&#x6211;&#x4EEC;&#x6388;&#x6743;&#x7684;&#x7528;&#x6237;&#x662F; zabbix</p>
<p>DBPassword=zabbix #&#x5BC6;&#x7801;&#x6211;&#x4EEC;&#x6388;&#x6743;&#x7684;&#x4E5F;&#x662F; zabbix</p>
<p><strong>4.&#x76D1;&#x63A7; Zabbix Server &#x672C;&#x8EAB;</strong></p>
<p>&#x76D1;&#x63A7;&#x672C;&#x8EAB;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x672C;&#x8EAB;&#x4F5C;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x5916;&#xFF0C;&#x81EA;&#x5DF1;&#x4E5F;&#x505A;&#x81EA;&#x5DF1;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4E5F;&#x8981;&#x4F7F;&#x7528;agentd&#x8FD9;&#x4E2A;&#x4EE3;&#x7406;&#x8005;
&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6709; agentd &#x548C; agent &#x4E24;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x540E;&#x8005;&#x4F9D;&#x8D56; xinetd</p>
<p>[root\@lewis63 ~]# vim /usr/local/zabbix/etc/zabbix_agentd.conf</p>
<p>Server=127.0.0.1 #&#x9ED8;&#x8BA4;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5668;&#x81EA;&#x5DF1;&#xFF0C;&#x8FD9;&#x4E09;&#x884C;&#x4E0D;&#x7528;&#x6539;</p>
<p>ServerActive=127.0.0.1</p>
<p>Hostname=Zabbix server</p>
<p>UnsafeUserParameters=1
#&#x5141;&#x8BB8;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x662F;&#x5728;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x811A;&#x672C;</p>
<p>&#x5176;&#x4E2D; Server &#x548C; ServerActive &#x90FD;&#x6307;&#x5B9A; zabbixserver &#x7684; IP
&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x88AB;&#x52A8;&#x540E;&#x8005;&#x662F;&#x4E3B;&#x52A8;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x524D;&#x8005;&#x5141;&#x8BB8; 127.0.0.1 &#x8FD9;&#x4E2A; ip
&#x6765;&#x6211;&#x8FD9;&#x53D6;&#x6570;&#x636E;&#x3002;&#x800C; serverActive &#x7684; 127.0.0.1 &#x7684;&#x610F;&#x601D;&#x662F;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E3B;&#x52A8;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x7ED9;&#x4ED6;</p>
<p><strong>5.&#x542F;&#x52A8;&#x670D;&#x52A1;</strong></p>
<p>&#x76F4;&#x63A5;&#x8FD0;&#x884C;</p>
<p>[root\@lewis63 ~]# /usr/local/zabbix/sbin/zabbix_server</p>
<p>/usr/local/zabbix/sbin/zabbix_server: error while loading shared libraries:
libmysqlclient.so.18: cannot open shared object file: No such file or directory</p>
<p>&#x62A5;&#x9519;&#x89E3;&#x51B3;</p>
<p>[root\@lewis63 ~]# vim /etc/ld.so.conf #&#x89E3;&#x51B3;&#x5E93;&#x6587;&#x4EF6;&#x627E;&#x4E0D;&#x5230;</p>
<p>include ld.so.conf.d/*.conf</p>
<p>/usr/local/mysql/lib/ #&#x6839;&#x636E;&#x5B9E;&#x9645;&#x8DEF;&#x5F84;&#x6DFB;&#x52A0;&#x6B64;&#x884C;</p>
<p>[root\@lewis63 ~]# ldconfig #&#x4F7F;&#x5E93;&#x6587;&#x4EF6;&#x751F;&#x6548;</p>
<p>[root\@lewis63 ~]# echo /usr/local/zabbix/sbin/zabbix_server &gt;&gt;
/etc/rc.local #&#x5F00;&#x673A;&#x542F;&#x52A8;</p>
<p>[root\@lewis63 ~]# /usr/local/zabbix/sbin/zabbix_server</p>
<p>[root\@lewis63 ~]# netstat -anput | grep zabbix_server</p>
<p>tcp 0 0 0.0.0.0:10051 0.0.0.0:* LISTEN 55457/zabbix_server</p>
<p>#server &#x8FD0;&#x884C;&#x7AEF;&#x53E3; 10051</p>
<p><strong>6. &#x7F16;&#x8F91; php &#x9875;&#x9762;&#x63A7;&#x5236;&#x6587;&#x4EF6;</strong></p>
<p>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x5199;&#x5165;&#x5230;&#x6211;&#x4EEC;&#x7684; Nginx &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x80FD;&#x52A0;&#x8F7D;&#x5230;&#x6211;&#x4EEC;&#x7684; zabbix
&#x9875;&#x9762;&#x76EE;&#x5F55;</p>
<p>[root\@lewis63 ~]# cp -r /usr/local/src/zabbix-3.4.3/frontends/php/*
/usr/local/nginx/html/</p>
<p>[root\@lewis63 ~]# vim /usr/local/nginx/conf/nginx.conf</p>
<p>location / {</p>
<p>root html;</p>
<p>index <strong>index.php</strong> index.html index.htm; #&#x627E;&#x5230;&#x6B64;&#x884C;&#x5185;&#x5BB9;&#xFF0C;&#x6DFB;&#x52A0;index.php</p>
<p>}</p>
<p>&#x91CD;&#x542F;nginx&#x670D;&#x52A1;&#x548C;php-fpm&#x670D;&#x52A1;</p>
<p>[root\@lewis63 ~]# nginx -s reload</p>
<p>[root\@lewis63 ~]# /etc/init.d/zabbix_server restart</p>
<p>[root\@lewis63 ~]# /etc/init.d/php-fpm restart</p>
<ol>
<li>&#x6253;&#x5F00;&#x7F51;&#x9875;&#x5B89;&#x88C5; zabbix web</li>
</ol>
<p>&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;<a href="http://192.168.1.63" target="_blank">http://192.168.1.63</a></p>
<p><img src="media/f8da635513322f74ea002f4a1523200e.png" alt=""></p>
<p>&#x5F00;&#x59CB;&#x68C0;&#x67E5;&#x73AF;&#x5883;</p>
<p><img src="media/f83595c1a513597312f128217db04e27.png" alt=""></p>
<p>&#x7F16;&#x8F91; php.ini &#x6587;&#x4EF6;&#xFF0C;&#x4FEE;&#x6539;&#x73AF;&#x5883;</p>
<p>[root\@lewis63 ~]# vim /usr/local/php/php.ini</p>
<p>post_max_size = 16M #&#x4FEE;&#x6539;</p>
<p>max_execution_time = 300 #&#x4FEE;&#x6539;</p>
<p>max_input_time = 300 #&#x4FEE;&#x6539;</p>
<p>date.timezone = Asia/Shanghai #&#x6B64;&#x884C;&#x6709;&#x6CE8;&#x91CA;&#xFF0C;&#x53BB;&#x6CE8;&#x91CA;&#x5E76;&#x4FEE;&#x6539;</p>
<p>always_populate_raw_post_data = -1 #&#x6B64;&#x884C;&#x53D6;&#x6D88;&#x6CE8;&#x91CA;&#x5373;&#x53EF;</p>
<p>mysqli.default_socket = /var/lib/mysql/mysql.sock #&#x6307;&#x5B9A;php&#x8FDE;&#x63A5;mysql&#x7684;sock&#x8DEF;&#x5F84;</p>
<p>[root\@lewis63 ~]# /etc/init.d/php-fpm restart#&#x91CD;&#x542F;fpm</p>
<p>&#x5237;&#x65B0;&#x9875;&#x9762;</p>
<p><img src="media/2672c8b5c1493d9097f7d3d267393e3f.png" alt=""></p>
<p>&#x5982;&#x679C;&#x63D0;&#x793A;&#x6CA1;&#x6709;&#x5B89;&#x88C5;PHP
LDAP&#x6A21;&#x5757;&#xFF0C;&#x4E3A;&#x4E86;&#x4E0D;&#x5F71;&#x54CD;&#x540E;&#x9762;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x73B0;&#x5728;&#x628A;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x8FDB;&#x53BB;</p>
<p>[root\@lewis63 ~]# cd /usr/local/src/php-7.0.18/ext/ldap/</p>
<p>[root\@lewis63 ldap]# /usr/local/php/bin/phpize</p>
<p>Configuring for:</p>
<p>PHP Api Version: 20151012</p>
<p>Zend Module Api No: 20151012</p>
<p>Zend Extension Api No: 320151012</p>
<p>[root\@lewis63 ldap]# ./configure
--with-php-config=/usr/local/php/bin/php-config --with-ldap</p>
<p>&#x4E0A;&#x9762;&#x7684;&#x8FC7;&#x7A0B;&#x4F1A;&#x62A5;&#x9519;,&#x63D0;&#x793A;&#x7F3A;&#x5C11;&#x5E93;&#x6587;&#x4EF6;</p>
<p>yum install openldap-devel openldap &#x2013;y</p>
<p>[root\@lewis63 ~]# rsync -avz /usr/lib64/libldap* /usr/lib/</p>
<p>&#x518D;&#x6B21;&#x7F16;&#x8BD1;&#xFF0C;&#x5373;&#x53EF;&#x901A;&#x8FC7;</p>
<p>[root\@lewis63 ldap]# ./configure
--with-php-config=/usr/local/php/bin/php-config --with-ldap</p>
<p>[root\@lewis63 ldap]# make &amp;&amp; make install</p>
<p>[root\@lewis63 ldap]# vim /usr/local/php/php.ini</p>
<p>&#x6DFB;&#x52A0;&#xFF1A;extension=ldap.so</p>
<p>[root\@lewis63 ldap]# /etc/init.d/php-fpm restart</p>
<p>&#x518D;&#x6B21;&#x5237;&#x65B0;&#x5373;&#x53EF;</p>
<p><img src="media/3727591f933c33aab5850c95472303fa.png" alt=""></p>
<p><strong>&#x8FD9;&#x91CC;Database host &#x9700;&#x8981;&#x6539;&#x4E3A;127.0.0.1</strong></p>
<p><img src="media/04769eff03c997f7fb7e026e9cf4afdd.png" alt=""></p>
<p><strong>&#x4E0B;&#x8F7D;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0A;&#x53BB;</strong></p>
<p><strong>[root\@lewis63 ~]# mv zabbix.conf.php /usr/local/nginx/html/conf</strong></p>
<p>&#x7136;&#x540E;&#x5237;&#x65B0;</p>
<p>&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#x5206;&#x522B;&#x4E3A; Admin&#xFF0C;zabbix</p>
<p>&#x70B9;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x7528;&#x6237;&#xFF0C;&#x7136;&#x540E;&#x9009;&#x62E9;&#x8BED;&#x8A00;</p>
<p><img src="media/2c3782cbb8bc8b76627b3b27cd7ec286.png" alt=""></p>
<p>&#x70B9;&#x51FB;&#x914D;&#x7F6E;-&#x4E3B;&#x673A; &#x542F;&#x7528;&#x672C;&#x4E3B;&#x673A;&#xFF08;&#x9ED8;&#x8BA4;&#x6CA1;&#x6709;&#x542F;&#x52A8;&#xFF0C;&#x70B9;&#x51FB;&#x540E;&#x9762;&#x7EA2;&#x8272;&#x7684;&#x505C;&#x7528;&#xFF0C;&#x5219;&#x542F;&#x7528;&#xFF09;</p>
<p>&#x628A;zabbix_agent &#x4E5F;&#x542F;&#x52A8;&#x8D77;&#x6765;</p>
<p>[root\@lewis63 ~]# /usr/local/zabbix/sbin/zabbix_agentd</p>
<p>&#x518D;&#x6B21;&#x5237;&#x65B0;&#x9875;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;agent&#x72B6;&#x6001;&#x5DF2;&#x7ECF;&#x6B63;&#x5E38;</p>
<p><img src="media/defe14b7db5cd3f90c05004ce0d8e17b.png" alt=""></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x51FA;&#x56FE;</p>
<p><img src="media/93780bbdfe3bd1d3215afd17ced4d9f4.png" alt=""></p>
<p><strong>7.&#x56FE;&#x8868;&#x5B57;&#x7B26;&#x4E71;&#x7801;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;</strong></p>
<p>&#x5728;window&#x7CFB;&#x7EDF;C:\Windows\Fonts&#x627E;&#x5230;&#x4E00;&#x4E2A;ttf&#x5B57;&#x4F53;&#x6587;&#x4EF6;&#xFF0C;</p>
<p>[root\@lewis63 ~]# cd /usr/local/nginx/html/fonts/</p>
<p>[root\@lewis63 ~]# mv DejaVuSans.ttf DejaVuSans.bak</p>
<p>[root\@lewis63 ~]# mv simli.ttf DejaVuSans.ttf #&#x91CD;&#x547D;&#x540D;&#x6210;DejaVuSans.ttf</p>
<h2 id="&#x4E8C;&#xFF0E;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;"><a name="&#x4E8C;&#xFF0E;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;" class="anchor-navigation-ex-anchor" href="#&#x4E8C;&#xFF0E;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x4E8C;&#xFF0E;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;</h2>
<h3 id="21&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;"><a name="21&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#21&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. 2.1&#x5BA2;&#x6237;&#x7AEF;&#x5B89;&#x88C5;&#x914D;&#x7F6E;</h3>
<p>1.&#x89E3;&#x51B3;&#x4F9D;&#x8D56;&#xFF1A;</p>
<p>[root\@lewis64 ~]# yum install -y curl curl-devel net-snmp net-snmp-devel
perl-DBI</p>
<p>[root\@lewis64 ~]# useradd -M -s /sbin/nologin zabbix</p>
<p>[root\@lewis64 ~]# tar zxf zabbix-3.4.3.tar.gz -C /usr/local/src/</p>
<p>[root\@lewis64 ~]# cd /usr/local/src/zabbix-3.4.3/</p>
<p>[root\@lewis64 zabbix-3.4.3]# ./configure --prefix=/usr/local/zabbix
--enable-agent</p>
<p>[root\@lewis64 zabbix-3.4.3]# make install</p>
<p>[root\@lewis64 ~]# cat /etc/services|grep zabbix</p>
<p>zabbix-agent 10050/tcp # Zabbix Agent</p>
<p>zabbix-agent 10050/udp # Zabbix Agent</p>
<p>zabbix-trapper 10051/tcp # Zabbix Trapper</p>
<p>zabbix-trapper 10051/udp # Zabbix Trapper</p>
<p>2.&#x542F;&#x52A8;agent</p>
<p>[root\@lewis64 ~]# /usr/local/zabbix/sbin/zabbix_agentd</p>
<p>[root\@lewis64 ~]# cp
/usr/local/src/zabbix-3.4.3/misc/init.d/fedora/core5/zabbix_agentd /etc/init.d/</p>
<p>[root\@lewis64 ~]# vim /etc/init.d/zabbix_agentd</p>
<p>ZABBIX_BIN=&quot;/usr/local/zabbix/sbin/zabbix_agentd&quot; #&#x4FEE;&#x6539;&#x6B64;&#x884C;</p>
<p>[root\@lewis64 ~]# chkconfig --add zabbix_agentd</p>
<p>[root\@lewis64 ~]# chkconfig zabbix_agentd on</p>
<ol>
<li>&#x914D;&#x7F6E; Agentd &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>
</ol>
<p>[root\@lewis64 ~]# vim /usr/local/zabbix/etc/zabbix_agentd.conf</p>
<p>Server=192.168.1.63 #zabbix server &#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x4E2A;&#xFF0C;&#x7528;&#xFF0C;&#x9694;&#x5F00;</p>
<p>ServerActive=192.168.1.63 #&#x4E3B;&#x52A8;&#x68C0;&#x67E5;&#x7684;&#x610F;&#x601D;,&#x4E3B;&#x52A8;&#x68C0;&#x67E5;&#x4E3B;&#x673A;&#x7684;&#x6570;&#x636E;&#x7684;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7ED9; Zabbix
Server</p>
<p>Hostname=lewis64</p>
<p>UnsafeUserParameters=1</p>
<p>&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF1A;[root\@lewis64 ~]# /etc/init.d/zabbix_agentd restart</p>
<p>[root\@lewis64 ~]# netstat -anput | grep zabbix</p>
<p>tcp 0 0 0.0.0.0:10050 0.0.0.0:* LISTEN 8544/zabbix_agentd</p>
<p><strong>Server &#x7AEF;&#x6D4B;&#x8BD5;&#x901A;&#x8BAF;</strong></p>
<p>[root\@lewis63 ~]# /usr/local/zabbix/bin/zabbix_get -s 192.168.1.64 -p10050 -k
system.uname</p>
<p>Linux lewis64 3.10.0-693.el7.x86_64 #1 SMP Tue Aug 22 21:09:27 UTC 2017 x86_64</p>
<p>#&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5BF9;&#x65B9;&#x7CFB;&#x7EDF;&#x7248;&#x672C;&#x5219;&#x8BC1;&#x660E;&#x6CA1;&#x6709;&#x95EE;&#x9898;</p>
<h3 id="22&#x670D;&#x52A1;&#x7AEF;&#x6DFB;&#x52A0;-host-&#x4E3B;&#x673A;"><a name="22&#x670D;&#x52A1;&#x7AEF;&#x6DFB;&#x52A0;-host-&#x4E3B;&#x673A;" class="anchor-navigation-ex-anchor" href="#22&#x670D;&#x52A1;&#x7AEF;&#x6DFB;&#x52A0;-host-&#x4E3B;&#x673A;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. 2.2&#x670D;&#x52A1;&#x7AEF;&#x6DFB;&#x52A0; Host &#x4E3B;&#x673A;</h3>
<p><img src="media/35139e72ea705b41e75dda111ed621d9.png" alt=""></p>
<p><img src="media/5ba511913c12101faca1d8541bd6d756.png" alt=""></p>
<p>&#x9009;&#x62E9;&#x6A21;&#x677F;</p>
<p>&#x70B9;&#x9009;&#x62E9;&#xFF0C;&#x9009;&#x62E9;Template OS Linux&#xFF0C;&#x70B9;&#x51FB;&#x4E24;&#x6B21;&#x6DFB;&#x52A0;</p>
<p>&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x5DF2;&#x7ECF;&#x88AB;&#x6DFB;&#x52A0;&#x8FDB;&#x6765;&#xFF0C;&#x542F;&#x7528;&#x8BE5;&#x4E3B;&#x673A;&#xFF0C;&#x53EF;&#x7528;&#x6027;&#x53D8;&#x6210;&#x7EFF;&#x8272;&#x5373;&#x53EF;&#x51FA;&#x56FE;&#x76D1;&#x63A7;</p>
<p><img src="media/e2a644eedfcf2c894b53ef4c3f16294f.png" alt=""></p>
<h3 id="23&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x9879;"><a name="23&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x9879;" class="anchor-navigation-ex-anchor" href="#23&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x9879;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. 2.3&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x9879;</h3>
<p><img src="media/c2efe4fa1e80069c644c5a55b1c22a03.png" alt=""></p>
<p>&#x7B5B;&#x9009;&#x65E0;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x51FA;&#x6765;&#x5F88;&#x591A;&#x76D1;&#x63A7;&#x9879;&#xFF0C;&#x9ED8;&#x8BA4;&#x90FD;&#x662F;&#x542F;&#x7528;&#x72B6;&#x6001;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x518D;&#x6B21;&#x542F;&#x52A8;&#xFF0C;&#x4E0B;&#x9762;&#x4FEE;&#x6539;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x7684;&#x65F6;&#x95F4;</p>
<p>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x63A2;&#x6D4B;&#x548C;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x63A2;&#x6D4B;</p>
<p>&#x628A;&#x539F;&#x6765;&#x7684;1h&#x6539;&#x6210;10s</p>
<p><img src="media/3d667ecb3935fcc74aede80817739cf5.png" alt=""></p>
<p>&#x4FEE;&#x6539;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x518D;&#x6B21;&#x8FD4;&#x56DE;&#x56FE;&#x5F62;&#x76D1;&#x63A7;&#x9875;&#x9762;&#xFF0C;&#x7A0D;&#x7B49;&#x51E0;&#x5206;&#x949F;&#x518D;&#x6B21;&#x67E5;&#x770B;&#x76D1;&#x63A7;&#x9879;</p>
<p><img src="media/90c32c6cacffeab8c8c9dea8d7a798d9.png" alt=""></p>
<p>&#x8FD4;&#x56DE;&#x4E3B;&#x9875;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6574;&#x4F53;&#x7684;&#x76D1;&#x63A7;&#x72B6;&#x6001;</p>
<h3 id="24&#x8BBE;&#x7F6E;-triger-&#x89E6;&#x53D1;&#x5668;&#x503C;"><a name="24&#x8BBE;&#x7F6E;-triger-&#x89E6;&#x53D1;&#x5668;&#x503C;" class="anchor-navigation-ex-anchor" href="#24&#x8BBE;&#x7F6E;-triger-&#x89E6;&#x53D1;&#x5668;&#x503C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.4. 2.4&#x8BBE;&#x7F6E; Triger &#x89E6;&#x53D1;&#x5668;&#x503C;</h3>
<p><img src="media/439b47c5627fa6c0ee6290d37e5aec8a.png" alt=""></p>
<p>&#x9ED8;&#x8BA4;&#x7684;&#x503C;&#x662F;20%</p>
<p><img src="media/f343fdc857d9585c42d83fcef72dfb35.png" alt=""></p>
<p>&#x4FEE;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x8BBE;&#x5B9A;&#x7684;&#x503C;15%</p>
<p><img src="media/b66c84c71579e2ff5fdbbcf45896ef4a.png" alt=""></p>
<h3 id="25&#x66F4;&#x65B0;&#x6570;&#x636E;"><a name="25&#x66F4;&#x65B0;&#x6570;&#x636E;" class="anchor-navigation-ex-anchor" href="#25&#x66F4;&#x65B0;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.5. 2.5&#x66F4;&#x65B0;&#x6570;&#x636E;</h3>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7ED8;&#x56FE;&#x989C;&#x8272;&#xFF0C;&#x627E;&#x5230;&#x4E3B;&#x673A;&#x5BF9;&#x5E94;&#x7684;&#x6A21;&#x5757;---&#x4FEE;&#x6539;&#x6A21;&#x677F;&#x5BF9;&#x5E94;&#x7684;&#x56FE;&#x5F62;&#x989C;&#x8272;</p>
<p><img src="media/88d7ba250d1d27f31f3d86120b6f73ec.png" alt=""></p>
<p>&#x6839;&#x636E;&#x9700;&#x6C42;&#x4FEE;&#x6539;&#x6BCF;&#x4E00;&#x4E2A;&#x9879;&#x7684;&#x663E;&#x793A;&#x989C;&#x8272;</p>
<p><img src="media/e830e847856254fdcb0aedc4a0252ea3.png" alt=""></p>
<p>&#x603B;&#x7ED3; zabbix &#x7684;&#x6587;&#x4EF6;</p>
<p>zabbix_agent.conf &#x662F;&#x7528;&#x8D85;&#x7EA7;&#x670D;&#x52A1;&#xFF08;xinetd&#xFF09;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x88AB;&#x52A8;&#x68C0;&#x67E5;&#xFF0C;&#x53EA;&#x6709; Server
&#x8BF4;&#x68C0;&#x67E5;&#x7684;&#x65F6;&#x5019;&#x624D;&#x68C0;&#x67E5;</p>
<p>zabbix_agentd.conf
&#x662F;&#x4EE5;&#x72EC;&#x7ACB;&#x8FDB;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x6765;&#x505A;&#x914D;&#x7F6E;&#xFF0C;&#x81EA;&#x52A8;&#x68C0;&#x67E5;&#xFF0C;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;
zabbix_server.conf Server &#x542F;&#x52A8;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;</p>
<p>zabbix_get &#x662F; Zabbix &#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x7528;&#x4E8E; Zabbix-Server &#x5230; Zabbix-Agent
&#x7684;&#x6570;&#x636E;&#x83B7;&#x53D6;&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x7528;&#x6765; &#x68C0;&#x6D4B;&#x9A8C;&#x8BC1; Agent &#x7684;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;&#x3002;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;</p>
<p>zabbix_get [-hV] -s \<host name="" or="" ip\=""> [-p \<port\>] [-I \<ip address\="">] -k
\<key\></key\></ip></port\></host></p>
<p>-h&#xFF1A;&#x8FDC;&#x7A0B; Zabbix-Agent &#x7684; IP &#x5730;&#x5740;&#x6216;&#x8005;&#x662F;&#x4E3B;&#x673A;&#x540D;&#x3002;</p>
<p>-p&#xFF1A;&#x8FDC;&#x7A0B; Zabbix-Agent &#x7684;&#x7AEF;&#x53E3;&#x3002;</p>
<p>-I&#xFF1A;&#x672C;&#x673A;&#x51FA;&#x53BB;&#x7684; IP &#x5730;&#x5740;&#xFF0C;&#x7528;&#x4E8E;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E2D;&#x6709;&#x591A;&#x4E2A;&#x7F51;&#x5361;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>-k&#xFF1A;&#x83B7;&#x53D6;&#x8FDC;&#x7A0B; Zabbix-Agent &#x6570;&#x636E;&#x6240;&#x4F7F;&#x7528;&#x7684; Key&#x3002;</p>
<p>[expmple\@~]# zabbix_get -s 192.168.0.64 -k system.uname</p>
<p>zabbix_sender &#x4E0E; get &#x76F8;&#x53CD;&#xFF0C;&#x7528;&#x6765;&#x53D1;&#x9001; Zabbix
&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x6027;&#x80FD;&#x6570;&#x636E;&#x3002;&#x8BE5;&#x5DE5;&#x5177;&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x957F;&#x65F6;&#x95F4;&#x8FD0;&#x884C;&#x7684;&#x7528;&#x6237;&#x811A;
&#x672C;&#xFF0C;&#x7528;&#x4E8E;&#x5B9A;&#x671F;&#x53D1;&#x9001;&#x53EF;&#x7528;&#x6027;&#x548C;&#x6027;&#x80FD;&#x6570;&#x636E;&#x3002;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;</p>
<p>zabbix_sender [-Vhv] {[-zpsI] -ko | [-zpI] -T -i \<file\> -r} [-c \<file\>]</file\></file\></p>
<p>&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</p>
<p>-c --config \<file\> &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</file\></p>
<p>-z --zabbix-server \<server\> zabbix server &#x7684; IP &#x5730;&#x5740;</server\></p>
<p>-p --port \<server port\=""> zabbix server &#x7AEF;&#x53E3;.&#x9ED8;&#x8BA4; 10051</server></p>
<p>-s --host \<hostname\> &#x4E3B;&#x673A;&#x540D;&#xFF0C;zabbix &#x91CC;&#x9762;&#x914D;&#x7F6E;&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF08;&#x4E0D;&#x662F;&#x670D;&#x52A1;&#x5668;&#x7684;
hostname&#xFF09;&#xFF0C;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;</hostname\></p>
<p>ip &#x5730;&#x5740;</p>
<p>-I --source-address \<ip address\=""> &#x6E90; IP</ip></p>
<p>-k --key \<key\> &#x76D1;&#x63A7;&#x9879;&#x7684; key</key\></p>
<p>-o --value \<key value\=""> key &#x503C;</key></p>
<p>-i --input-file \<input file\=""> &#x4ECE;&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x8BFB;&#x53D6; hostname&#x3001;key&#x3001;value
&#x4E00;&#x884C;&#x4E3A;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x4F5C;&#x4E3A;&#x5206;</p>
<p>&#x9694;&#x7B26;&#xFF0C;&#x5982;&#x679C;&#x4E3B;&#x673A;&#x540D;&#x5E26;&#x7A7A;&#x683C;&#xFF0C;&#x90A3;&#x4E48;&#x8BF7;&#x4F7F;&#x7528;&#x53CC;&#x5F15;&#x53F7;&#x5305;&#x8D77;&#x6765;</p>
<p>-T --with-timestamps &#x4E00;&#x884C;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x7A7A;&#x683C;&#x4F5C;&#x4E3A;&#x5206;&#x9694;&#x7B26;:
\<hostname\>\<key\>\<timestamp\></timestamp\></key\></hostname\></p>
<p>\<value\>&#xFF0C;&#x914D;&#x5408; --input-file option&#xFF0C;timestamp &#x4E3A; unix &#x65F6;&#x95F4;&#x6233;</value\></p>
<p>-r --real-time &#x5C06;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x63D0;&#x4EA4;&#x7ED9;&#x670D;&#x52A1;&#x5668;</p>
<p>-v --verbose &#x8BE6;&#x7EC6;&#x6A21;&#x5F0F;, -vv &#x66F4;&#x8BE6;&#x7EC6;</p>
<h2 id="&#x4E09;&#xFF0E;zabbix&#x76D1;&#x63A7;apache&#x670D;&#x52A1;"><a name="&#x4E09;&#xFF0E;zabbix&#x76D1;&#x63A7;apache&#x670D;&#x52A1;" class="anchor-navigation-ex-anchor" href="#&#x4E09;&#xFF0E;zabbix&#x76D1;&#x63A7;apache&#x670D;&#x52A1;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x4E09;&#xFF0E;zabbix&#x76D1;&#x63A7;Apache&#x670D;&#x52A1;</h2>
<p><a href="http://www.zabbix.org/wiki/Main_Page" target="_blank">http://www.zabbix.org/wiki/Main_Page</a></p>
<p><a href="https://github.com/zabbix/zabbix-community-repos" target="_blank">https://github.com/zabbix/zabbix-community-repos</a></p>
<p>&#x5404;&#x79CD;&#x6A21;&#x677F;</p>
<p><a href="http://www.douglas.wiki.br/doku.php?id=en:installing_and_configuring_zabbix" target="_blank">http://www.douglas.wiki.br/doku.php?id=en:installing_and_configuring_zabbix</a></p>
<p>&#x4E0B;&#x8F7D;&#x811A;&#x672C;wget <a href="https://github.com/lorf/zapache/archive/master.zip" target="_blank">https://github.com/lorf/zapache/archive/master.zip</a></p>
<h3 id="31&#x542F;&#x7528;apache-&#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x542F;apache&#x7684;server-status"><a name="31&#x542F;&#x7528;apache-&#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x542F;apache&#x7684;server-status" class="anchor-navigation-ex-anchor" href="#31&#x542F;&#x7528;apache-&#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x542F;apache&#x7684;server-status"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. 3.1&#x542F;&#x7528;apache &#x670D;&#x52A1;&#x5668;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x542F;apache&#x7684;server-status</h3>
<p>[root\@lewis64 ~]# vim /etc/httpd/conf/httpd.conf &#x5728;&#x672B;&#x5C3E;&#x52A0;&#x5165;</p>
<p>ExtendedStatus On</p>
<p>\<location server-status\=""></location></p>
<p>SetHandler server-status</p>
<p>Order allow,deny</p>
<p>Allow from 127.0.0.1 192.168.1.0/24</p>
<p>\&lt;/location&gt;</p>
<p>[root\@lewis64 ~]# systemctl restart httpd &#x91CD;&#x542F;&#x540E;&#x6D4B;&#x8BD5;</p>
<p><img src="media/eca753e795e68559a7630dcabc7a763e.png" alt=""></p>
<p>[root\@lewis64 ~]# unzip zapache-master.zip</p>
<p>[root\@lewis64 ~]# cd zapache-master</p>
<p>[root\@lewis64 zapache-master]# ls</p>
<p>httpd-server-status.conf.sample userparameter_zapache.conf.sample
zapache-template-active.xml</p>
<p>README.md zapache zapache-template.xml</p>
<p>&#x8BF4;&#x660E;&#xFF1A;</p>
<p>httpd-server-status.conf.sample &#x662F;&#x7528;&#x4E8E;&#x914D;&#x7F6E;server-status&#x7684;&#x4E0A;&#x4E2A;&#x6B65;&#x9AA4;&#x5DF2;&#x7ECF;&#x914D;&#x7F6E;&#x8FC7;&#x4E86;</p>
<p>userparameter_zapache.conf.sample zapache &#x5173;&#x952E;&#x7684;&#x6587;&#x4EF6;</p>
<p>zapache-template-active.xml zapache-template.xml&#x6A21;&#x677F;</p>
<h3 id="32&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x76F8;&#x5E94;&#x76EE;&#x5F55;"><a name="32&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x76F8;&#x5E94;&#x76EE;&#x5F55;" class="anchor-navigation-ex-anchor" href="#32&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x76F8;&#x5E94;&#x76EE;&#x5F55;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. 3.2&#x5C06;&#x89E3;&#x538B;&#x51FA;&#x6765;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x76F8;&#x5E94;&#x76EE;&#x5F55;</h3>
<p>[root\@lewis64 zapache-master]# cp zapache /usr/local/bin/</p>
<p>[root\@lewis64 zapache-master]# cp userparameter_zapache.conf.sample
/usr/local/zabbix/etc/zabbix_agentd.conf.d/</p>
<p>[root\@lewis64 zapache-master]# cd !$</p>
<p>[root\@lewis64 zabbix_agentd.conf.d]# mv userparameter_zapache.conf.sample
userparameter_zapache.conf #&#x91CD;&#x547D;&#x540D;</p>
<p>UserParameter=zapache[*],/var/lib/zabbixsrv/externalscripts/zapache \$1</p>
<p>&#x6539;&#x4E3A;UserParameter=zapache[*],/usr/local/bin/zapache \$1</p>
<p>[root\@lewis64 ~]# chmod +x /usr/local/bin/zapache</p>
<h3 id="33&#x4FEE;&#x6539;zabbix--agentdconf"><a name="33&#x4FEE;&#x6539;zabbix--agentdconf" class="anchor-navigation-ex-anchor" href="#33&#x4FEE;&#x6539;zabbix--agentdconf"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. 3.3&#x4FEE;&#x6539;zabbix -agentd.conf</h3>
<p>[root\@lewis64 ~]# vim /usr/local/zabbix/etc/zabbix_agentd.conf</p>
<p>Include=/usr/local/zabbix/etc/zabbix_agentd.conf.d/ #&#x542F;&#x7528;&#x5F15;&#x7528;&#x6B64;&#x76EE;&#x5F55;&#x6587;&#x4EF6;</p>
<h3 id="34&#x524D;&#x7AEF;&#x9875;&#x9762;&#x64CD;&#x4F5C;"><a name="34&#x524D;&#x7AEF;&#x9875;&#x9762;&#x64CD;&#x4F5C;" class="anchor-navigation-ex-anchor" href="#34&#x524D;&#x7AEF;&#x9875;&#x9762;&#x64CD;&#x4F5C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. 3.4&#x524D;&#x7AEF;&#x9875;&#x9762;&#x64CD;&#x4F5C;</h3>
<p>&#x5BFC;&#x5165;&#x6A21;&#x677F;</p>
<p>&#x9009;&#x62E9;&#x914D;&#x7F6E;-&gt;&#x6A21;&#x677F; &#x5BFC;&#x5165;</p>
<p><img src="media/ce6918bea89cffde24946aafb0e3e8a8.png" alt=""></p>
<p>&#x5173;&#x8054;&#x6A21;&#x677F;</p>
<p>&#x914D;&#x7F6E;-&gt;&#x4E3B;&#x673A; &#x9009;&#x62E9;lewis64 apache&#x5BA2;&#x6237;&#x7AEF;</p>
<p><img src="media/9911c2e3950011d94584aa4b2b98ac58.png" alt=""></p>
<p>&#x67E5;&#x770B;&#x6700;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x7B5B;&#x9009;Apache&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x751F;&#x4EA7;&#x56FE;&#x5F62;</p>
<p><img src="media/382bf6a9d5c12c641507fcb2dfe31f5a.png" alt=""></p>
<p><img src="media/896d42bddeba7f6e70872f6d151e203f.png" alt=""></p>
<h2 id="&#x56DB;&#xFF0E;&#x914D;&#x7F6E;-zabbix-&#x76D1;&#x63A7;-mysql"><a name="&#x56DB;&#xFF0E;&#x914D;&#x7F6E;-zabbix-&#x76D1;&#x63A7;-mysql" class="anchor-navigation-ex-anchor" href="#&#x56DB;&#xFF0E;&#x914D;&#x7F6E;-zabbix-&#x76D1;&#x63A7;-mysql"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x56DB;&#xFF0E;&#x914D;&#x7F6E; zabbix &#x76D1;&#x63A7; MySQL</h2>
<p>&#x548C;&#x76D1;&#x63A7;&#x6211;&#x4EEC;&#x7684; Apache
&#x4E00;&#x6837;&#xFF0C;&#x5BFB;&#x627E;&#x5408;&#x9002;&#x7684;&#x811A;&#x672C;&#xFF0C;&#x4E0D;&#x8FC7;&#xFF0C;&#x811A;&#x672C;&#x5E76;&#x4E0D;&#x662F;&#x90A3;&#x4E48;&#x5BB9;&#x6613;&#x5C31;&#x53EF;&#x4EE5;&#x627E;&#x5F97;&#x5230;&#x7684;!
&#x8981;&#x4E48;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x53BB;&#x5199;&#xFF0C;&#x8981;&#x4E48;&#x81EA;&#x5DF1;&#x627E;&#x5230;&#x7684;&#x62FF;&#x6765;&#x4FEE;&#x6539;&#xFF0C;&#x90FD;&#x662F;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x4EE3;&#x4EF7;&#x7684;&#xFF01;ZABBIX &#x9ED8;&#x8BA4;&#x63D0;&#x4F9B;&#x4E86;
MYSQL &#x7684;&#x76D1;&#x63A7;&#x6A21;&#x677F;</p>
<p>&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#x6388;&#x6743;</p>
<p>mysql&gt; grant usage on *.* to zabbix\@&apos;%&apos; identified by &apos;123456&apos;;</p>
<p>mysql&gt; flush privileges;</p>
<p>[root\@lewis64 ~]# cp
/usr/local/src/zabbix-3.4.3/conf/zabbix_agentd/userparameter_mysql.conf
/usr/local/zabbix/etc/zabbix_agentd.conf.d/</p>
<p>[root\@lewis64 ~]# vim /usr/local/zabbix/etc/zabbix_agentd.conf</p>
<p>Include=/usr/local/zabbix/etc/zabbix_agentd.conf.d/*.conf #&#x542F;&#x7528;&#x5E76;&#x4FEE;&#x6539;</p>
<p>&#x5EFA;&#x7ACB;&#x6570;&#x636E;&#x5E93;&#x548C; zabbix &#x7684;&#x94FE;&#x63A5;&#x4FE1;&#x606F;</p>
<p>[root\@lewis64 ~]# vim /usr/local/zabbix/etc/.my.cnf</p>
<p>#Zabbix Agent</p>
<p>[mysql]</p>
<p>host=lewis63</p>
<p>user=zabbix</p>
<p>password=123456</p>
<p>socket= /var/lib/mysql/mysql.sock</p>
<p>[mysqladmin]</p>
<p>host=lewis63</p>
<p>user=zabbix</p>
<p>password=123456</p>
<p>socket= /var/lib/mysql/mysql.sock</p>
<p>[root\@lewis64 ~]# vim
/usr/local/zabbix/etc/zabbix_agentd.conf.d/userparameter_mysql.conf</p>
<p>&#x5C06; HOME=/var/lib/zabbix &#x5168;&#x90E8;&#x6539;&#x6210; HOME=/usr/local/zabbix/etc/</p>
<p># For all the following commands HOME should be set to the directory that has
.my.cnf file with password information.&#xFF08;&#x63D0;&#x793A;&#x76EE;&#x5F55;&#x4E0B;&#x5FC5;&#x987B;&#x6709;.my.cnf&#xFF09;</p>
<p>&#x6A21;&#x677F;&#x5E94;&#x7528;&#x4E3B;&#x673A;</p>
<p>&#x9009;&#x62E9;&#x914D;&#x7F6E;-&gt;&#x4E3B;&#x673A;-&gt;&#x9009;&#x62E9;&#x6A21;&#x677F;</p>
<p><img src="media/0277d1473240249614af010c6858a5df.png" alt=""></p>
<p><img src="media/d047e371829cf0e745acc3ad6d4acb58.png" alt=""></p>
<p><img src="media/ecb88dabd7de411344e869b3e0c47bf9.png" alt=""></p>
<h2 id="&#x4E94;&#xFF0E;zabbix&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x914D;&#x7F6E;"><a name="&#x4E94;&#xFF0E;zabbix&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#&#x4E94;&#xFF0E;zabbix&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. &#x4E94;&#xFF0E;Zabbix&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x914D;&#x7F6E;</h2>
<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x9996;&#x5148;&#x5B89;&#x88C5;mailx&#x7EC4;&#x4EF6;&#x5E76;&#x914D;&#x7F6E;&#x597D;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x4E09;&#x65B9;&#x90AE;&#x7BB1;&#x53D1;&#x9001;&#x90AE;&#x4EF6;</p>
<p>[root\@lewis63 ~]# yum -y install mailx</p>
<p>&#x7136;&#x540E;&#x7F16;&#x8F91;mailx&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<p>[root\@lewis63 ~]# vim /etc/mail.rc</p>
<p>set from=xiaokai0312\@163.com</p>
<p>set smtp=smtp.163.com</p>
<p>set smtp-auth-user=xiaokai0312\@163.com</p>
<p>set smtp-auth-password=&#x4F60;&#x7684;&#x6388;&#x6743;&#x7801;</p>
<p>set smtp-auth=login</p>
<p>&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x540E;&#x6D4B;&#x8BD5;&#x90AE;&#x4EF6;&#x662F;&#x5426;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x53D1;&#x9001;&#x51FA;&#x53BB;</p>
<p>[root\@lewis63 ~]# echo &quot;zabbix test mail&quot; |mailx -s &quot;zabbix&quot; <a href="mailto:xxxxxx@qq.com" target="_blank">xxxxxx@qq.com</a></p>
<p><strong>&#x5728;zabbix&#x670D;&#x52A1;&#x7AEF;&#x5199;&#x90AE;&#x4EF6;&#x53D1;&#x9001;&#x811A;&#x672C;</strong></p>
<p>[root\@lewis63 ~]# cd /usr/local/zabbix/share/zabbix/alertscripts/</p>
<p>[root\@lewis63 alertscripts]# vim sendmail.sh</p>
<p>#!/bin/bash</p>
<p>messages=`echo $3 | tr &apos;\r\n&apos; &apos;\n&apos;`</p>
<p>subject=`echo $2 | tr &apos;\r\n&apos; &apos;\n&apos;`</p>
<p>echo &quot;${messages}&quot; | mailx -s &quot;${subject}&quot; $1 &gt;&gt;/tmp/sendmail.log 2&gt;&amp;1</p>
<p>[root\@lewis63 alertscripts]# chown zabbix.zabbix sendmail.sh</p>
<p>[root\@lewis63 alertscripts]# chmod +x sendmail.sh</p>
<p><strong>&#x4FEE;&#x6539;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8BA9;&#x670D;&#x52A1;&#x8BFB;&#x53D6;&#x5230;&#x8FD9;&#x4E2A;&#x811A;&#x672C;</strong></p>
<p>[root\@lewis63 ~]# vim /usr/local/zabbix/etc/zabbix_server.conf</p>
<p>&#x4FEE;&#x6539;&#xFF1A;</p>
<p># AlertScriptsPath=${datadir}/zabbix/alertscripts</p>
<p>&#x4E3A;</p>
<p>AlertScriptsPath=/usr/local/zabbix/share/zabbix/alertscripts</p>
<p>[root\@lewis63 ~]# /usr/local/zabbix/share/zabbix/alertscripts/sendmail.sh
xxxx\@qq.com &quot;&#x6D4B;&#x8BD5;&#x6807;&#x9898;&quot; &quot;&#x6D4B;&#x8BD5;&#x90AE;&#x4EF6;&#x5185;&#x5BB9;&quot;</p>
<p>[root\@lewis63 ~]# chmod 777 /tmp/sendmail.log</p>
<p><strong>&#x9875;&#x9762;&#x6DFB;&#x52A0;</strong></p>
<p><strong>&#x7BA1;&#x7406;-&gt;&#x62A5;&#x8B66;&#x5A92;&#x4ECB;&#x7C7B;&#x578B;-&gt;&#x521B;&#x5EFA;&#x5A92;&#x4F53;&#x7C7B;&#x578B;</strong></p>
<p><img src="media/a5735207afb0da07908064a838d494bd.png" alt=""></p>
<p><img src="media/3ff97900497977c88eec5fa2c52fdb5b.png" alt=""></p>
<p><strong>{ALERT.SENDTO}</strong></p>
<p><strong>{ALERT.SUBJECT}</strong></p>
<p><strong>{ALERT.MESSAGE}</strong></p>
<p>&#x5F88;&#x591A;&#x4EBA;&#x5B89;&#x88C5;zabbix 3.0&#x4E4B;&#x540E;&#xFF0C;&#x5199;&#x7684;&#x811A;&#x672C;&#x4E00;&#x76F4;&#x53D1;&#x4FE1;&#x4E0D;&#x6210;&#x529F;,&#x624B;&#x52A8;&#x6267;&#x884C;&#x65F6;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;zabbix3.0&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x5199;&#x53C2;&#x6570;&#xFF0C;&#x5B83;&#x662F;&#x4E0D;&#x4F1A;&#x4F20;&#x53C2;&#x6570;&#x7684;&#x3002;</p>
<p>&#x5728;2.x&#x7248;&#x672C;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x4F20;3&#x4E2A;&#x53C2;&#x6570;</p>
<p>&#x70B9;&#x7BA1;&#x7406;-&gt;&#x7528;&#x6237;-&gt;&#x70B9;&#x51FB;Admin-&gt;&#x518D;&#x70B9;&#x62A5;&#x8B66;&#x5A92;&#x4ECB;-&gt;&#x6DFB;&#x52A0;</p>
<p><img src="media/f6c5aa88093bac1c81883bc412728fec.png" alt=""></p>
<p><img src="media/6cd7ac8965f85197fe44a960f5c16360.png" alt=""></p>
<p>&#x914D;&#x7F6E;-&gt;&#x52A8;&#x4F5C;-&gt;&#x521B;&#x5EFA;&#x52A8;&#x4F5C;</p>
<p>&#x540D;&#x79F0;&#xFF1A;Action-Email</p>
<p>&#x64CD;&#x4F5C;&#xFF1A;</p>
<p>&#x9ED8;&#x8BA4;&#x63A5;&#x6536;&#x4EBA;&#xFF1A;&#x6545;&#x969C;{TRIGGER.STATUS},&#x670D;&#x52A1;&#x5668;:{HOSTNAME1}&#x53D1;&#x751F;: {TRIGGER.NAME}&#x6545;&#x969C;!</p>
<p>&#x9ED8;&#x8BA4;&#x4FE1;&#x606F;&#xFF1A;</p>
<p>&#x544A;&#x8B66;&#x4E3B;&#x673A;:{HOSTNAME1}</p>
<p>&#x544A;&#x8B66;&#x65F6;&#x95F4;:{EVENT.DATE} {EVENT.TIME}</p>
<p>&#x544A;&#x8B66;&#x7B49;&#x7EA7;:{TRIGGER.SEVERITY}</p>
<p>&#x544A;&#x8B66;&#x4FE1;&#x606F;: {TRIGGER.NAME}</p>
<p>&#x544A;&#x8B66;&#x9879;&#x76EE;:{TRIGGER.KEY1}</p>
<p>&#x95EE;&#x9898;&#x8BE6;&#x60C5;:{ITEM.NAME}:{ITEM.VALUE}</p>
<p>&#x5F53;&#x524D;&#x72B6;&#x6001;:{TRIGGER.STATUS}:{ITEM.VALUE1}</p>
<p>&#x4E8B;&#x4EF6; ID:{EVENT.ID}</p>
<p><img src="media/eb3d38a69132cca73d103e98118da4e4.png" alt=""></p>
<p>&#x6062;&#x590D;&#x64CD;&#x4F5C;</p>
<p>&#x9ED8;&#x8BA4;&#x63A5;&#x6536;&#x4EBA;&#xFF1A;&#x5DF2;&#x6062;&#x590D;&#xFF01;{TRIGGER.STATUS}, &#x670D;&#x52A1;&#x5668;:{HOSTNAME1}: {TRIGGER.NAME}</p>
<p>&#x6062;&#x590D;&#x4FE1;&#x606F;&#xFF1A;</p>
<p>&#x544A;&#x8B66;&#x4E3B;&#x673A;:{HOSTNAME1}</p>
<p>&#x544A;&#x8B66;&#x65F6;&#x95F4;:{EVENT.DATE} {EVENT.TIME}</p>
<p>&#x544A;&#x8B66;&#x7B49;&#x7EA7;:{TRIGGER.SEVERITY}</p>
<p>&#x544A;&#x8B66;&#x4FE1;&#x606F;: {TRIGGER.NAME}</p>
<p>&#x544A;&#x8B66;&#x9879;&#x76EE;:{TRIGGER.KEY1}</p>
<p>&#x95EE;&#x9898;&#x8BE6;&#x60C5;:{ITEM.NAME}:{ITEM.VALUE}</p>
<p>&#x5F53;&#x524D;&#x72B6;&#x6001;:{TRIGGER.STATUS}:{ITEM.VALUE1}</p>
<p>&#x4E8B;&#x4EF6; ID:{EVENT.ID}</p>
<p><img src="media/22b42148c5f33fc369c9a84bb0b1bfd9.png" alt=""></p>
<p><img src="media/8dd58e35b0afd62a6cd7806fcc919010.png" alt=""></p>
<p>&#x6D4B;&#x8BD5;&#xFF0C;&#x5173;&#x95ED; zabbix &#x5BA2;&#x6237;&#x7AEF;&#x670D;&#x52A1; zabbix_agentd</p>
<p>[root\@lewis64 ~]# /etc/init.d/zabbix_agentd stop</p>
<p>&#x5EF6;&#x8FDF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x5927;&#x6982;&#x8981;5-10&#x5206;&#x949F;</p>
<p>&#x53EF;&#x4EE5;&#x5728;&#x65E5;&#x5FD7;&#x770B;&#x9001;&#x8FBE;&#x72B6;&#x6001;&#xFF0C;qq&#x90AE;&#x7BB1;&#x5FAE;&#x4FE1;(&#x7ED1;&#x5B9A;qq&#x90AE;&#x7BB1;)&#x540C;&#x65F6;&#x6536;&#x5230;&#x544A;&#x8B66;</p>
<p><img src="media/cc8e71edb029ef67714f0923ac2e5938.png" alt=""></p>
<p><img src="media/dbf1c3d1e79cab6e55288d5db767ba3a.png" alt=""></p>
<p>&#x914D;&#x7F6E; zabbix &#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x5E76;&#x76D1;&#x63A7;&#xFF08;&#x76D1;&#x63A7;&#xFF37;&#xFF49;&#xFF4E;&#xFF44;&#xFF4F;&#xFF57;&#xFF53;&#x4E3A;&#x6848;&#x4F8B;&#xFF09;</p>
<p>&#x9996;&#x5148;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#xFF37;&#xFF49;&#xFF4E;&#xFF44;&#xFF4F;&#xFF57;&#xFF53;&#x7AEF;&#xFF41;&#xFF47;&#xFF45;&#xFF4E;&#xFF54;</p>
<p><a href="https://www.zabbix.com/downloads/3.4.6/zabbix_agents_3.4.6.win.zip" target="_blank">https://www.zabbix.com/downloads/3.4.6/zabbix_agents_3.4.6.win.zip</a></p>
<p>&#x627E;&#x5230;conf&#x4E0B;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; zabbix_agentd.win.conf
(&#x5EFA;&#x8BAE;&#x7528;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x8F6F;&#x4EF6;&#x6253;&#x5F00;)&#xFF0C;&#x4FEE;&#x6539;LogFile&#x3001;Server&#x3001;ServerActive&#x3001;Hostname&#x8FD9;&#x56DB;&#x4E2A;&#x53C2;&#x6570;&#x3002;&#x5177;&#x4F53;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>LogFile=c:\zabbix_agentd.log</p>
<p>Server=192.168.1.63</p>
<p>Hostname=iqsz-l0001</p>
<p>ServerActive=192.168.1.63 #zabbix server&#x5730;&#x5740;</p>
<p>&#x5176;&#x4E2D;logfile&#x662F;zabbix&#x65E5;&#x5FD7;&#x5B58;&#x653E;&#x5730;&#x5740;&#x3002;Server
&#x662F;zabbix&#x670D;&#x52A1;&#x7AEF;ip&#x5730;&#x5740;&#x3002;Hostname&#x662F;&#x672C;&#x673A;&#x673A;&#x5668;&#x540D;&#x3002;</p>
<p><strong>&#x4EE5;&#x7BA1;&#x7406;&#x5458;&#x8EAB;&#x4EFD;&#x8FD0;&#x884C;</strong>&#x5207;&#x6362;&#x81F3;agent&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;D:\zabbix_agent\bin\win64&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x62A5;&#x9519;</p>
<p><img src="media/8a02ee358a85f1dfe4dd2ceb0ca2afb8.png" alt=""></p>
<p>&#x5B89;&#x88C5;windos zabbix&#x5BA2;&#x6237;&#x7AEF;</p>
<p>zabbix_agentd.exe -c D:\zabbix_agent\conf\zabbix_agentd.win.conf &#x2013;i</p>
<p><img src="media/880b91639a36a6e4b92f46d5020dd2c4.png" alt=""></p>
<p>&#x542F;&#x52A8;&#x5BA2;&#x6237;&#x7AEF;</p>
<p>zabbix_agentd.exe -c D:\zabbix_agent\conf\zabbix_agentd.win.conf &#x2013;s</p>
<p><img src="media/4ee5a885ad93e6df4bc881be214e76cc.png" alt=""></p>
<p>&#x521B;&#x5EFA;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x89C4;&#x5219;</p>
<p>&#x914D;&#x7F6E;-&gt;&#x81EA;&#x52A8;&#x53D1;&#x73B0;-&gt;&#x521B;&#x5EFA;&#x53D1;&#x73B0;&#x89C4;&#x5219;</p>
<p><img src="media/586c4cd638f37e1d05eef84e5a40824e.png" alt=""></p>
<p>&#x6DFB;&#x52A0;&#x5173;&#x8054;&#x52A8;&#x4F5C;</p>
<p><img src="media/f2a2e6131104ff03c599f069f05f1409.png" alt=""></p>
<p>&#x64CD;&#x4F5C;-&#x53EF;&#x6DFB;&#x52A0;&#x53D1;&#x73B0;&#x4E3B;&#x673A;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x901A;&#x77E5;</p>
<p>&#x53D1;&#x9001;&#x6A21;&#x7248;</p>
<p>&#x9ED8;&#x8BA4;&#x63A5;&#x6536;&#x4EBA;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x4E3B;&#x673A;: {DISCOVERY.DEVICE.STATUS} {DISCOVERY.DEVICE.IPADDRESS}</p>
<p>&#x9ED8;&#x8BA4;&#x4FE1;&#x606F;</p>
<p>&#x53D1;&#x73B0;&#x89C4;&#x5219;: {DISCOVERY.RULE.NAME}</p>
<p>&#x8BBE;&#x5907;IP:{DISCOVERY.DEVICE.IPADDRESS}</p>
<p>&#x8BBE;&#x5907;DNS: {DISCOVERY.DEVICE.DNS}</p>
<p>&#x8BBE;&#x5907;&#x72B6;&#x6001;: {DISCOVERY.DEVICE.STATUS}</p>
<p>&#x8BBE;&#x5907;&#x8FD0;&#x884C;&#x65F6;&#x95F4;: {DISCOVERY.DEVICE.UPTIME}</p>
<p>&#x8BBE;&#x5907;&#x670D;&#x52A1;&#x7AEF;&#x53E3;: {DISCOVERY.SERVICE.NAME}</p>
<p><img src="media/b1a9d2290ccaabb94039e8e58e6e22a2.png" alt=""></p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9;lewis 2018 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2018-09-19 13:12:30
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Nagios监控.html" class="navigation navigation-prev " aria-label="Previous page: Nagios监控">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="MySQL配置主从读写分离.html" class="navigation navigation-next " aria-label="Next page: MySQL配置主从读写分离">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"zabbix源码安装及配置","level":"1.7","depth":1,"next":{"title":"MySQL配置主从读写分离","level":"1.8","depth":1,"path":"linux/MySQL配置主从读写分离.md","ref":"linux/MySQL配置主从读写分离.md","articles":[]},"previous":{"title":"Nagios监控","level":"1.6","depth":1,"path":"linux/Nagios监控.md","ref":"linux/Nagios监控.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-plus","favicon","anchors@^0.7.1","include-codeblock@^3.0.2","splitter@^0.0.8","tbfed-pagefooter@^0.0.1","anchor-navigation-ex@0.1.8"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright ©lewis 2018","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"fontSetting":{"theme":"white","family":"msyh","size":2},"splitter":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"isRewritePageTitle":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right"},"favicon":{"shortcut":"/images/favicon.ico","bookmark":"/images/favicon.ico"},"include-codeblock":{"check":false,"edit":true,"fixlang":false,"lang":"","template":"ace","theme":"chrome","unindent":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{},"search-plus":{}},"theme":"default","author":"Lewis","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"黎明的奔跑","language":"zh-hans","output.name":"site","links":{"sidebar":{"Home":"https://www.shareknowledge.top"}},"gitbook":"3.2.3","description":"求知若渴,虚心若愚"},"file":{"path":"linux/zabbix源码安装及配置.md","mtime":"2018-09-19T05:12:30.916Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-28T05:16:00.785Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

